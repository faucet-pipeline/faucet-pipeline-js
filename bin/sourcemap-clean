#!/usr/bin/env node
let { Transform } = require("stream");

let [, ...args] = process.argv;
let clean = Transform({
	transform(chunk, encoding, callback) {
		let obj = JSON.parse(chunk);
		Object.keys(obj).
			filter(key => !args.includes(key)).
			forEach(key => delete obj[key]);
		callback(null, JSON.stringify(obj));
	}
});

process.stdin.pipe(clean).pipe(process.stdout);
